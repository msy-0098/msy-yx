<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>爱的密码</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF4B91',
                        secondary: '#FFB8D1',
                        dark: '#2C3E50',
                        light: '#F8F9FA'
                    },
                    fontFamily: {
                        romantic: ['Dancing Script', 'cursive']
                    },
                    animation: {
                        'float-sm': 'float-sm 6s ease-in-out infinite',
                    },
                    keyframes: {
                        'float-sm': {
                            '0%, 100%': { transform: 'translateY(0) rotate(0deg)' },
                            '50%': { transform: 'translateY(-10px) rotate(5deg)' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bg-glass {
                background: rgba(255, 255, 255, 0.15);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }
            .text-gradient {
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
            }
            .input-focus {
                transition: all 0.3s ease;
            }
            .input-focus:focus {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px -5px rgba(255, 75, 145, 0.1), 0 8px 10px -6px rgba(255, 75, 145, 0.1);
            }
            .btn-pulse {
                animation: pulse 2s infinite;
            }
            @keyframes pulse {
                0% {
                    box-shadow: 0 0 0 0 rgba(255, 75, 145, 0.4);
                }
                70% {
                    box-shadow: 0 0 0 10px rgba(255, 75, 145, 0);
                }
                100% {
                    box-shadow: 0 0 0 0 rgba(255, 75, 145, 0);
                }
            }
            .password-strength {
                height: 4px;
                transition: width 0.3s ease;
            }
            .particle {
                position: absolute;
                pointer-events: none;
                border-radius: 50%;
            }
            .unlock-animation {
                animation: unlock 0.8s ease-out forwards;
            }
            @keyframes unlock {
                0% { transform: rotate(-15deg); }
                50% { transform: rotate(15deg); }
                100% { transform: rotate(0deg); }
            }
            .envelope-flap {
                transform-origin: top;
                transition: transform 0.5s ease;
                z-index: 10;
            }
            .letter-content {
                transition: transform 0.5s ease 0.2s;
                z-index: 5;
            }
            .envelope-front {
                z-index: 20;
            }
            .envelope-container {
                max-width: 90vw;
                max-height: 60vw;
                min-height: 280px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-dark to-black min-h-screen flex flex-col items-center justify-center p-4 overflow-hidden relative">
    <!-- 装饰元素 - 响应式调整 -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute top-5 left-5 w-16 h-16 bg-primary/20 rounded-full blur-3xl float-sm"></div>
        <div class="absolute bottom-10 right-5 w-24 h-24 bg-secondary/10 rounded-full blur-3xl float-sm" style="animation-delay: -2s;"></div>
        <div class="absolute top-1/3 right-1/4 w-12 h-12 bg-primary/10 rounded-full blur-2xl float-sm" style="animation-delay: -4s;"></div>
    </div>
    
    <!-- 主要标题 - 响应式字体 -->
    <div class="text-center mb-8 z-10">
        <h1 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-gradient bg-gradient-to-r from-primary to-secondary mb-3 tracking-tight">
            爱的密码
        </h1>
        <p class="text-gray-300 max-w-md mx-auto text-sm md:text-base">
            输入正确密码，开启专属情书
        </p>
    </div>
    
    <!-- 密码输入卡片 - 响应式尺寸 -->
    <div id="passwordCard" class="bg-glass border border-white/10 rounded-2xl p-6 w-full max-w-md mx-auto shadow-xl z-20 transform transition-all duration-500 hover:shadow-2xl">
        <div class="flex justify-center mb-5">
            <div id="lockIcon" class="text-4xl md:text-5xl text-primary mb-2 transition-transform duration-500">
                <i class="fa fa-lock"></i>
            </div>
        </div>
        
        <h2 class="text-xl md:text-2xl font-bold text-white text-center mb-5">
            输入密码
        </h2>
        
        <div class="space-y-4">
            <div>
                <label for="password" class="block text-gray-300 mb-2 text-sm">
                    专属密码
                </label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fa fa-key text-primary/70"></i>
                    </div>
                    <input 
                        type="password" 
                        id="password" 
                        class="w-full pl-10 pr-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder-gray-400 input-focus text-base"
                        placeholder="请输入密码..."
                    >
                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                        <button type="button" id="togglePassword" class="text-gray-400 hover:text-white">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                </div>
                <div class="mt-2 flex items-center">
                    <div id="strengthIndicator" class="password-strength bg-gray-600 rounded-full w-0"></div>
                    <span id="strengthText" class="ml-2 text-xs text-gray-400">输入密码查看强度</span>
                </div>
            </div>
            
            <button 
                id="submitBtn" 
                class="w-full py-3 px-6 bg-gradient-to-r from-primary to-secondary rounded-lg text-white font-medium transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 transform hover:-translate-y-1 btn-pulse text-base"
            >
                <i class="fa fa-heart mr-2"></i>解锁情书
            </button>
        </div>
        
        <div id="errorMessage" class="mt-3 text-center text-red-400 text-sm hidden">
            密码错误，请重试
        </div>
    </div>
    
    <!-- 信件容器 - 响应式设计 -->
    <div id="letterContainer" class="mt-8 w-full max-w-md mx-auto z-10 hidden opacity-0 transition-opacity duration-700">
        <div id="envelope" class="relative envelope-container mx-auto cursor-pointer perspective-1000">
            <div class="absolute inset-0 bg-white rounded-xl shadow-xl overflow-hidden">
                <!-- 信封底部 -->
                <div class="absolute inset-0 bg-gradient-to-b from-pink-50 to-white p-4 md:p-6">
                    <!-- 信件内容 -->
                    <div id="letterContent" class="letter-content relative h-full overflow-y-auto p-3 md:p-4 bg-white rounded-lg shadow-inner transform">
                        <div class="text-center mb-4 md:mb-6">
                            <h3 class="text-lg md:text-xl font-bold text-primary mb-2">给我最爱的人</h3>
                            <div class="w-12 md:w-16 h-1 bg-primary/30 mx-auto mt-1"></div>
                        </div>
                        
                        <p class="text-gray-700 mb-3 md:mb-4 leading-relaxed text-sm md:text-base">
                            亲爱的 <span id="recipientName" class="font-medium">你</span>：
                        </p>
                        
                        <p class="text-gray-700 mb-3 md:mb-4 leading-relaxed text-sm md:text-base">
                            当你看到这封信的时候，我希望你能感受到我满满的爱意。每一天想到你，我的心都会充满温暖和幸福。你是我生命中最美好的礼物，我珍惜我们在一起的每一刻。
                        </p>
                        
                        <p class="text-gray-700 mb-4 leading-relaxed text-sm md:text-base">
                            无论风雨还是晴天，我都会一直在你身边，牵着你的手，共同走过人生的每一个阶段。我爱你，不仅仅是今天，而是永远。
                        </p>
                        
                        <div class="text-right">
                            <p class="font-bold text-primary text-sm md:text-base">永远爱你的 <span id="senderName" class="font-medium">我</span></p>
                        </div>
                    </div>
                </div>
                
                <!-- 信封盖 - 调整剪裁路径适应小屏幕 -->
                <div id="envelopeFlap" class="envelope-flap absolute top-0 left-0 w-full h-1/2 bg-pink-100 z-10" style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);">
                    <div class="absolute inset-0 bg-gradient-to-t from-pink-100 to-pink-200"></div>
                </div>
                
                <!-- 信封前面 - 调整剪裁路径适应小屏幕 -->
                <div class="envelope-front absolute bottom-0 left-0 w-full h-1/2 bg-pink-200 z-20" style="clip-path: polygon(0 0, 100% 0, 85% 100%, 15% 100%);">
                    <div class="absolute inset-0 bg-gradient-to-t from-pink-200 to-pink-150"></div>
                </div>
            </div>
        </div>
        
        <button id="resetBtn" class="mt-5 w-full py-3 px-6 bg-white/10 border border-white/20 rounded-lg text-white font-medium transition-all duration-300 hover:bg-white/20 text-base">
            <i class="fa fa-arrow-left mr-2"></i>返回
        </button>
    </div>
    
    <!-- 底部版权信息 -->
    <div class="absolute bottom-4 text-center text-gray-500 text-xs z-10">
        <p>爱的密码 &copy; 2023</p>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 元素引用
            const passwordInput = document.getElementById('password');
            const submitBtn = document.getElementById('submitBtn');
            const errorMessage = document.getElementById('errorMessage');
            const passwordCard = document.getElementById('passwordCard');
            const lockIcon = document.getElementById('lockIcon');
            const togglePassword = document.getElementById('togglePassword');
            const letterContainer = document.getElementById('letterContainer');
            const resetBtn = document.getElementById('resetBtn');
            const strengthIndicator = document.getElementById('strengthIndicator');
            const strengthText = document.getElementById('strengthText');
            const envelopeFlap = document.getElementById('envelopeFlap');
            const letterContent = document.getElementById('letterContent');
            const envelope = document.getElementById('envelope');
            
            // 配置
            const config = {
                password: "1314", // 默认密码
                recipient: "你",
                sender: "我"
            };
            
            // 切换密码可见性
            togglePassword.addEventListener('click', function() {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                this.innerHTML = type === 'password' ? '<i class="fa fa-eye-slash"></i>' : '<i class="fa fa-eye"></i>';
            });
            
            // 密码强度检测
            passwordInput.addEventListener('input', function() {
                const password = this.value;
                let strength = 0;
                
                if (password.length > 5) strength += 1;
                if (password.length > 8) strength += 1;
                if (/[A-Z]/.test(password)) strength += 1;
                if (/[0-9]/.test(password)) strength += 1;
                if (/[^A-Za-z0-9]/.test(password)) strength += 1;
                
                // 更新强度指示器
                let width, color, text;
                switch(strength) {
                    case 0:
                        width = '0%';
                        color = 'bg-gray-600';
                        text = '输入密码查看强度';
                        break;
                    case 1:
                        width = '20%';
                        color = 'bg-red-500';
                        text = '非常弱';
                        break;
                    case 2:
                        width = '40%';
                        color = 'bg-red-400';
                        text = '弱';
                        break;
                    case 3:
                        width = '60%';
                        color = 'bg-yellow-400';
                        text = '中等';
                        break;
                    case 4:
                        width = '80%';
                        color = 'bg-green-400';
                        text = '强';
                        break;
                    case 5:
                        width = '100%';
                        color = 'bg-green-500';
                        text = '非常强';
                        break;
                }
                
                strengthIndicator.className = 'password-strength rounded-full';
                strengthIndicator.classList.add(color);
                strengthIndicator.style.width = width;
                strengthText.textContent = text;
                strengthText.className = `ml-2 text-xs ${color === 'bg-gray-600' ? 'text-gray-400' : color}`;
            });
            
            // 提交密码
            submitBtn.addEventListener('click', verifyPassword);
            
            // 按Enter提交
            passwordInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    verifyPassword();
                }
            });
            
            // 重置按钮
            resetBtn.addEventListener('click', function() {
                // 隐藏信件，显示密码卡片
                letterContainer.classList.add('opacity-0');
                setTimeout(() => {
                    letterContainer.classList.add('hidden');
                    passwordCard.classList.remove('opacity-0', 'translate-y-10');
                    
                    // 重置信封
                    envelopeFlap.style.transform = 'rotateX(0deg)';
                    letterContent.style.transform = 'translateY(0)';
                    
                    // 重置锁图标
                    lockIcon.innerHTML = '<i class="fa fa-lock"></i>';
                    lockIcon.classList.remove('unlock-animation');
                    
                    // 清空密码
                    passwordInput.value = '';
                    strengthIndicator.style.width = '0%';
                    strengthText.textContent = '输入密码查看强度';
                    strengthText.className = 'ml-2 text-xs text-gray-400';
                }, 500);
            });
            
            // 点击信封打开/关闭
            envelope.addEventListener('click', function() {
                if (envelopeFlap.style.transform === 'rotateX(180deg)') {
                    // 关闭信封
                    envelopeFlap.style.transform = 'rotateX(0deg)';
                    letterContent.style.transform = 'translateY(0)';
                } else {
                    // 打开信封
                    envelopeFlap.style.transform = 'rotateX(180deg)';
                    letterContent.style.transform = 'translateY(-20px)';
                }
            });
            
            // 验证密码
            function verifyPassword() {
                const password = passwordInput.value.trim();
                
                if (password === config.password) {
                    // 密码正确
                    errorMessage.classList.add('hidden');
                    
                    // 锁变钥匙动画
                    lockIcon.classList.add('unlock-animation');
                    setTimeout(() => {
                        lockIcon.innerHTML = '<i class="fa fa-key"></i>';
                    }, 400);
                    
                    // 创建粒子效果 - 优化移动设备性能
                    createParticles(15);
                    
                    // 延迟显示信件
                    setTimeout(() => {
                        // 隐藏密码卡片
                        passwordCard.classList.add('opacity-0', 'translateY-10');
                        
                        // 显示信件
                        setTimeout(() => {
                            letterContainer.classList.remove('hidden');
                            setTimeout(() => {
                                letterContainer.classList.remove('opacity-0');
                                
                                // 自动打开信封
                                setTimeout(() => {
                                    envelopeFlap.style.transform = 'rotateX(180deg)';
                                    letterContent.style.transform = 'translateY(-20px)';
                                }, 500);
                            }, 100);
                        }, 500);
                    }, 1000);
                } else {
                    // 密码错误
                    errorMessage.classList.remove('hidden');
                    
                    // 抖动动画
                    passwordCard.classList.add('animate-shake');
                    setTimeout(() => {
                        passwordCard.classList.remove('animate-shake');
                    }, 500);
                    
                    // 重置密码输入框
                    passwordInput.focus();
                }
            }
            
            // 创建粒子效果 - 优化移动设备性能
            function createParticles(count) {
                const container = document.body;
                const cardRect = passwordCard.getBoundingClientRect();
                
                for (let i = 0; i < count; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    
                    // 随机大小
                    const size = Math.random() * 6 + 3;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    
                    // 随机颜色
                    const colors = ['#FF4B91', '#FFB8D1', '#FF85A2', '#FFC2D1', '#FFD6E0'];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.backgroundColor = color;
                    
                    // 从按钮中心出发
                    particle.style.left = `${cardRect.left + cardRect.width / 2}px`;
                    particle.style.top = `${cardRect.top + cardRect.height / 2}px`;
                    
                    container.appendChild(particle);
                    
                    // 随机速度和方向
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 4 + 2;
                    const vx = Math.cos(angle) * speed;
                    const vy = Math.sin(angle) * speed;
                    
                    // 随机动画持续时间
                    const duration = Math.random() * 0.6 + 0.4;
                    
                    // 设置动画
                    particle.animate([
                        { transform: 'translate(0, 0)', opacity: 1 },
                        { transform: `translate(${vx * 30}px, ${vy * 30}px)`, opacity: 0 }
                    ], {
                        duration: duration * 1000,
                        easing: 'cubic-bezier(0.25, 0.1, 0.25, 1)'
                    });
                    
                    // 动画结束后移除元素
                    setTimeout(() => {
                        particle.remove();
                    }, duration * 1000);
                }
            }
            
            // 背景装饰动画 - 优化移动设备
            setInterval(() => {
                createFloatingElement();
            }, 2500);
            
            function createFloatingElement() {
                const element = document.createElement('div');
                const size = Math.random() * 12 + 4;
                const left = Math.random() * 100;
                const duration = Math.random() * 12 + 8;
                
                element.className = 'absolute text-primary/20';
                element.style.fontSize = `${size}px`;
                element.style.left = `${left}%`;
                element.style.bottom = '-15px';
                element.style.opacity = '0';
                element.style.transition = `opacity 0.5s, transform ${duration}s linear`;
                
                // 随机爱心字符
                const hearts = ['💖', '💝', '💓', '💗', '💕', '💘', '💞'];
                element.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                
                document.body.appendChild(element);
                
                // 触发动画
                setTimeout(() => {
                    element.style.opacity = '0.4';
                    element.style.transform = `translateY(-${window.innerHeight + 30}px) rotate(${Math.random() * 360}deg)`;
                }, 10);
                
                // 动画结束后移除元素
                setTimeout(() => {
                    element.remove();
                }, duration * 1000);
            }
        });
    </script>
</body>
</html>
